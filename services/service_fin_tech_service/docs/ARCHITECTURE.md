# Finance Investment Assistant - Architecture Guide

## ğŸ—ï¸ ê°œì„ ëœ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
pkg_finance_invest_assist/
â”œâ”€â”€ ğŸ“ api_gateway/                 # API Gateway ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ v1/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ recommend.py        # íˆ¬ì ì¶”ì²œ API
â”‚   â”‚   â”‚   â”œâ”€â”€ market.py           # ì‹œì¥ ë°ì´í„° API
â”‚   â”‚   â”‚   â”œâ”€â”€ news.py             # ë‰´ìŠ¤ ë¶„ì„ API
â”‚   â”‚   â”‚   â””â”€â”€ health.py           # í—¬ìŠ¤ì²´í¬ API
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ ğŸ“ core/                    # í•µì‹¬ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py               # ì„¤ì • ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ security.py             # ë³´ì•ˆ ì„¤ì •
â”‚   â”‚   â””â”€â”€ middleware.py           # ë¯¸ë“¤ì›¨ì–´
â”‚   â”œâ”€â”€ ğŸ“ services/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ gateway_service.py      # ê²Œì´íŠ¸ì›¨ì´ ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ proxy_service.py        # í”„ë¡ì‹œ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ ğŸ“ models/                  # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ request.py              # ìš”ì²­ ëª¨ë¸
â”‚   â”‚   â””â”€â”€ response.py             # ì‘ë‹µ ëª¨ë¸
â”‚   â”œâ”€â”€ ğŸ“ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ logger.py               # ë¡œê¹…
â”‚   â”‚   â””â”€â”€ exceptions.py           # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”œâ”€â”€ main.py                     # ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ ğŸ“ investment_advisor/           # íˆ¬ì ì¶”ì²œ ì—”ì§„
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ recommend.py            # ì¶”ì²œ API
â”‚   â”‚   â””â”€â”€ health.py               # í—¬ìŠ¤ì²´í¬
â”‚   â”œâ”€â”€ ğŸ“ core/                    # í•µì‹¬ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â””â”€â”€ security.py
â”‚   â”œâ”€â”€ ğŸ“ services/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ invest_timing.py        # íˆ¬ì íƒ€ì´ë° ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ harvest_timing.py       # íšŒìˆ˜ íƒ€ì´ë° ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ technical_analysis.py   # ê¸°ìˆ ì  ë¶„ì„
â”‚   â”‚   â””â”€â”€ risk_analysis.py        # ë¦¬ìŠ¤í¬ ë¶„ì„
â”‚   â”œâ”€â”€ ğŸ“ models/                  # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ schemas.py              # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ enums.py                # ì—´ê±°í˜•
â”‚   â”œâ”€â”€ ğŸ“ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ indicators.py           # ê¸°ìˆ ì  ì§€í‘œ
â”‚   â”‚   â”œâ”€â”€ calculations.py         # ê³„ì‚° ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ validators.py           # ë°ì´í„° ê²€ì¦
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ ğŸ“ market_data/                 # ì‹œì¥ ë°ì´í„° ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ price.py                # ê°€ê²© API
â”‚   â”‚   â”œâ”€â”€ market.py               # ì‹œì¥ ë°ì´í„° API
â”‚   â”‚   â””â”€â”€ health.py               # í—¬ìŠ¤ì²´í¬
â”‚   â”œâ”€â”€ ğŸ“ core/                    # í•µì‹¬ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â””â”€â”€ security.py
â”‚   â”œâ”€â”€ ğŸ“ services/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ price_service.py        # ê°€ê²© ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ market_data_service.py  # ì‹œì¥ ë°ì´í„° ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ data_provider.py        # ë°ì´í„° ì œê³µì
â”‚   â”‚   â””â”€â”€ cache_service.py        # ìºì‹œ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ ğŸ“ models/                  # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â””â”€â”€ enums.py
â”‚   â”œâ”€â”€ ğŸ“ providers/               # ì™¸ë¶€ API ì œê³µì
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ yahoo_finance.py        # Yahoo Finance
â”‚   â”‚   â”œâ”€â”€ alpha_vantage.py        # Alpha Vantage
â”‚   â”‚   â””â”€â”€ base_provider.py        # ê¸°ë³¸ ì œê³µì
â”‚   â”œâ”€â”€ ğŸ“ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data_processor.py       # ë°ì´í„° ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ formatters.py           # ë°ì´í„° í¬ë§·í„°
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ ğŸ“ news_analyzer/               # ë‰´ìŠ¤ ë¶„ì„ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ news.py                 # ë‰´ìŠ¤ API
â”‚   â”‚   â”œâ”€â”€ analysis.py             # ë¶„ì„ API
â”‚   â”‚   â””â”€â”€ health.py               # í—¬ìŠ¤ì²´í¬
â”‚   â”œâ”€â”€ ğŸ“ core/                    # í•µì‹¬ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â””â”€â”€ security.py
â”‚   â”œâ”€â”€ ğŸ“ services/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ crawler_service.py      # í¬ë¡¤ë§ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ analysis_service.py     # ë¶„ì„ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ sentiment_service.py    # ê°ì • ë¶„ì„
â”‚   â”‚   â””â”€â”€ content_service.py      # ì½˜í…ì¸  ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ ğŸ“ models/                  # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â””â”€â”€ enums.py
â”‚   â”œâ”€â”€ ğŸ“ crawlers/                # í¬ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_crawler.py         # ê¸°ë³¸ í¬ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ news_crawler.py         # ë‰´ìŠ¤ í¬ë¡¤ëŸ¬
â”‚   â”‚   â””â”€â”€ finance_crawler.py      # ê¸ˆìœµ í¬ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ ğŸ“ analyzers/               # ë¶„ì„ê¸°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ sentiment_analyzer.py   # ê°ì • ë¶„ì„ê¸°
â”‚   â”‚   â”œâ”€â”€ keyword_analyzer.py     # í‚¤ì›Œë“œ ë¶„ì„ê¸°
â”‚   â”‚   â””â”€â”€ trend_analyzer.py       # íŠ¸ë Œë“œ ë¶„ì„ê¸°
â”‚   â”œâ”€â”€ ğŸ“ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ text_processor.py       # í…ìŠ¤íŠ¸ ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ url_utils.py            # URL ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ ğŸ“ shared/                      # ê³µí†µ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ ğŸ“ core/                    # ê³µí†µ í•µì‹¬
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py               # ê³µí†µ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ database.py             # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ logging.py              # ë¡œê¹… ì„¤ì •
â”‚   â”‚   â””â”€â”€ security.py             # ë³´ì•ˆ ì„¤ì •
â”‚   â”œâ”€â”€ ğŸ“ models/                  # ê³µí†µ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py                 # ê¸°ë³¸ ëª¨ë¸
â”‚   â”‚   â””â”€â”€ enums.py                # ê³µí†µ ì—´ê±°í˜•
â”‚   â”œâ”€â”€ ğŸ“ utils/                   # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ decorators.py           # ë°ì½”ë ˆì´í„°
â”‚   â”‚   â”œâ”€â”€ exceptions.py           # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ validators.py           # ê²€ì¦ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ helpers.py              # í—¬í¼ í•¨ìˆ˜
â”‚   â”œâ”€â”€ ğŸ“ middleware/              # ê³µí†µ ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py                 # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ logging.py              # ë¡œê¹… ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â””â”€â”€ cors.py                 # CORS ë¯¸ë“¤ì›¨ì–´
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ ğŸ“ tests/                       # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â”œâ”€â”€ ğŸ“ unit/                    # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_api_gateway/
â”‚   â”‚   â”œâ”€â”€ test_investment_advisor/
â”‚   â”‚   â”œâ”€â”€ test_market_data/
â”‚   â”‚   â””â”€â”€ test_news_analyzer/
â”‚   â”œâ”€â”€ ğŸ“ integration/             # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_api_integration.py
â”‚   â”‚   â””â”€â”€ test_service_integration.py
â”‚   â”œâ”€â”€ ğŸ“ e2e/                     # E2E í…ŒìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ test_end_to_end.py
â”‚   â”œâ”€â”€ ğŸ“ fixtures/                # í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜
â”‚   â”‚   â”œâ”€â”€ data.py
â”‚   â”‚   â””â”€â”€ mocks.py
â”‚   â””â”€â”€ conftest.py                 # pytest ì„¤ì •
â”‚
â”œâ”€â”€ ğŸ“ deployment/                  # ë°°í¬ ì„¤ì •
â”‚   â”œâ”€â”€ ğŸ“ docker/                  # Docker ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ Dockerfile.api_gateway
â”‚   â”‚   â”œâ”€â”€ Dockerfile.investment_advisor
â”‚   â”‚   â”œâ”€â”€ Dockerfile.market_data
â”‚   â”‚   â””â”€â”€ Dockerfile.news_analyzer
â”‚   â”œâ”€â”€ ğŸ“ nginx/                   # Nginx ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ nginx.conf
â”‚   â”‚   â””â”€â”€ ssl/
â”‚   â”œâ”€â”€ ğŸ“ scripts/                 # ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”‚   â”œâ”€â”€ deploy.sh
â”‚   â”‚   â”œâ”€â”€ deploy.bat
â”‚   â”‚   â””â”€â”€ docker_uv_dev.sh
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ ğŸ“ docs/                        # ë¬¸ì„œ
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API ë¬¸ì„œ
â”‚   â”‚   â”œâ”€â”€ api_gateway.md
â”‚   â”‚   â”œâ”€â”€ investment_advisor.md
â”‚   â”‚   â”œâ”€â”€ market_data.md
â”‚   â”‚   â””â”€â”€ news_analyzer.md
â”‚   â”œâ”€â”€ ğŸ“ architecture/            # ì•„í‚¤í…ì²˜ ë¬¸ì„œ
â”‚   â”‚   â”œâ”€â”€ overview.md
â”‚   â”‚   â”œâ”€â”€ data_flow.md
â”‚   â”‚   â””â”€â”€ security.md
â”‚   â”œâ”€â”€ ğŸ“ development/             # ê°œë°œ ê°€ì´ë“œ
â”‚   â”‚   â”œâ”€â”€ setup.md
â”‚   â”‚   â”œâ”€â”€ coding_standards.md
â”‚   â”‚   â””â”€â”€ testing.md
â”‚   â””â”€â”€ ğŸ“ deployment/              # ë°°í¬ ê°€ì´ë“œ
â”‚       â”œâ”€â”€ docker.md
â”‚       â””â”€â”€ production.md
â”‚
â”œâ”€â”€ ğŸ“ scripts/                     # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ setup_dev.sh                # ê°œë°œ í™˜ê²½ ì„¤ì •
â”‚   â”œâ”€â”€ run_tests.sh                # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
â”‚   â”œâ”€â”€ lint_code.sh                # ì½”ë“œ ë¦°íŒ…
â”‚   â””â”€â”€ format_code.sh              # ì½”ë“œ í¬ë§·íŒ…
â”‚
â”œâ”€â”€ pyproject.toml                  # í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ README.md                       # í”„ë¡œì íŠ¸ ê°œìš”
â”œâ”€â”€ ARCHITECTURE.md                 # ì•„í‚¤í…ì²˜ ê°€ì´ë“œ (ì´ íŒŒì¼)
â””â”€â”€ CONTRIBUTING.md                 # ê¸°ì—¬ ê°€ì´ë“œ
```

## ğŸ¯ ê°œì„  ì‚¬í•­

### 1. ì¼ê´€ëœ ë””ë ‰í† ë¦¬ êµ¬ì¡°
- ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ë™ì¼í•œ êµ¬ì¡°ë¥¼ ë”°ë¦„
- `api/`, `core/`, `services/`, `models/`, `utils/` íŒ¨í„´ í†µì¼
- ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬

### 2. ê³„ì¸µë³„ ë¶„ë¦¬
- **API Layer**: HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬
- **Service Layer**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- **Data Layer**: ë°ì´í„° ì ‘ê·¼ ë° ëª¨ë¸
- **Utility Layer**: ê³µí†µ ìœ í‹¸ë¦¬í‹°

### 3. í…ŒìŠ¤íŠ¸ êµ¬ì¡° ê°œì„ 
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, í†µí•© í…ŒìŠ¤íŠ¸, E2E í…ŒìŠ¤íŠ¸ ë¶„ë¦¬
- ê° ì„œë¹„ìŠ¤ë³„ í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬
- ê³µí†µ í”½ìŠ¤ì²˜ ë° ëª¨í‚¹

### 4. ë¬¸ì„œí™” ê°•í™”
- API ë¬¸ì„œ
- ì•„í‚¤í…ì²˜ ë¬¸ì„œ
- ê°œë°œ ê°€ì´ë“œ
- ë°°í¬ ê°€ì´ë“œ

### 5. ê³µí†µ ëª¨ë“ˆ ì²´ê³„í™”
- ì„¤ì •, ë°ì´í„°ë² ì´ìŠ¤, ë¡œê¹… ë“± ê³µí†µ ê¸°ëŠ¥
- ë¯¸ë“¤ì›¨ì–´ ë¶„ë¦¬
- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ëª¨ë“ˆí™”

## ğŸš€ êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: êµ¬ì¡° ì •ë¦¬ (1-2ì£¼)
1. ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¬êµ¬ì„±
2. ê³µí†µ ëª¨ë“ˆ ë¶„ë¦¬
3. ê¸°ë³¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡° ì„¤ì •

### Phase 2: ì½”ë“œ í’ˆì§ˆ í–¥ìƒ (2-3ì£¼)
1. ì¼ê´€ëœ ì½”ë”© ìŠ¤íƒ€ì¼ ì ìš©
2. íƒ€ì… íŒíŠ¸ ì¶”ê°€
3. ë¬¸ì„œí™” ê°œì„ 

### Phase 3: í…ŒìŠ¤íŠ¸ ê°•í™” (1-2ì£¼)
1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
2. í†µí•© í…ŒìŠ¤íŠ¸ êµ¬í˜„
3. CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

ì´ëŸ¬í•œ êµ¬ì¡° ê°œì„ ì„ í†µí•´ ì½”ë“œì˜ ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜ì„±, í™•ì¥ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 